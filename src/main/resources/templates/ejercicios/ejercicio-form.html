<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${esNuevo} ? 'Crear Ejercicio - FlexFit' : 'Editar Ejercicio - FlexFit'">Ejercicio - FlexFit</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .gradient-card {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(220, 38, 38, 0.2) 100%);
        }
        .input-glow:focus {
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.2);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-950 via-red-950 to-slate-900 min-h-screen">

<!-- Header -->
<header class="bg-slate-900/80 backdrop-blur-xl border-b border-red-500/20 sticky top-0 z-50">
    <div class="max-w-3xl mx-auto px-6 py-4">
        <div class="flex justify-between items-center">
            <div class="flex items-center gap-4">
                <a th:href="@{/admin}" class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center shadow-lg shadow-red-500/30">
                        <span class="text-white font-bold text-2xl">F</span>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold text-white">FlexFit</h1>
                        <p class="text-red-400 text-sm" th:text="${esNuevo} ? 'Crear Ejercicio' : 'Editar Ejercicio'">Ejercicio</p>
                    </div>
                </a>
            </div>
            <a th:href="@{/ejercicios/catalogo}" class="bg-slate-800/50 hover:bg-slate-700/50 text-white px-4 py-2 rounded-lg transition border border-slate-700 flex items-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                </svg>
                Volver al Catalogo
            </a>
        </div>
    </div>
</header>

<!-- Breadcrumb -->
<nav class="max-w-3xl mx-auto px-6 py-4">
    <ol class="flex items-center gap-2 text-sm flex-wrap">
        <li><a th:href="@{/admin}" class="text-slate-400 hover:text-white transition">Admin</a></li>
        <li class="text-slate-600">/</li>
        <li><a th:href="@{/ejercicios/catalogo}" class="text-slate-400 hover:text-white transition">Catalogo</a></li>
        <li class="text-slate-600">/</li>
        <li class="text-white font-medium" th:text="${esNuevo} ? 'Crear' : 'Editar'">Formulario</li>
    </ol>
</nav>

<!-- Main Content -->
<main class="max-w-3xl mx-auto px-6 pb-12">

    <div class="gradient-card backdrop-blur-sm border border-red-500/20 rounded-2xl overflow-hidden">

        <!-- Header del Card -->
        <div class="bg-slate-900/50 px-8 py-6 border-b border-red-500/10">
            <div class="flex items-center gap-4">
                <div class="w-14 h-14 bg-gradient-to-br from-red-500 to-orange-500 rounded-2xl flex items-center justify-center shadow-lg">
                    <svg th:if="${esNuevo}" class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                    </svg>
                    <svg th:if="${!esNuevo}" class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                    </svg>
                </div>
                <div>
                    <h2 class="text-2xl font-bold text-white" th:text="${esNuevo} ? 'Crear Nuevo Ejercicio' : 'Editar Ejercicio'">Formulario</h2>
                    <p class="text-slate-400" th:text="${esNuevo} ? 'Completa los datos para agregar un ejercicio al catalogo' : 'Modifica los datos del ejercicio'">Descripcion</p>
                </div>
            </div>
        </div>

        <!-- Formulario -->
        <form th:action="${esNuevo} ? @{/ejercicios/crear} : @{/ejercicios/editar/{id}(id=${ejercicio.id})}"
              th:object="${ejercicio}" method="post" class="p-8 space-y-6">

            <!-- Nombre -->
            <div>
                <label class="block text-white font-medium mb-3 flex items-center gap-2">
                    <svg class="w-5 h-5 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                    </svg>
                    Nombre del Ejercicio
                    <span class="text-red-400">*</span>
                </label>
                <input type="text" th:field="*{nombre}" required
                       class="w-full bg-slate-900/50 border border-slate-700/50 rounded-xl px-5 py-4 text-white placeholder-slate-500 focus:border-red-500 focus:outline-none input-glow transition text-lg"
                       placeholder="Ej: Press de banca, Sentadillas, Dominadas...">
            </div>

            <!-- Descripcion -->
            <div>
                <label class="block text-white font-medium mb-3 flex items-center gap-2">
                    <svg class="w-5 h-5 text-orange-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"></path>
                    </svg>
                    Descripcion
                </label>
                <textarea th:field="*{descripcion}" rows="4"
                          class="w-full bg-slate-900/50 border border-slate-700/50 rounded-xl px-5 py-4 text-white placeholder-slate-500 focus:border-red-500 focus:outline-none input-glow transition resize-none"
                          placeholder="Describe el ejercicio, como realizarlo correctamente, consejos de forma..."></textarea>
            </div>

            <!-- Tipo de Entrenamiento y Musculo Principal -->
            <div class="grid sm:grid-cols-2 gap-6">
                <div>
                    <label class="block text-white font-medium mb-3 flex items-center gap-2">
                        <svg class="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                        </svg>
                        Tipo de Entrenamiento
                        <span class="text-red-400">*</span>
                    </label>
                    <select th:field="*{tipoEntrenamiento}" required
                            class="w-full bg-slate-900/50 border border-slate-700/50 rounded-xl px-5 py-4 text-white focus:border-red-500 focus:outline-none input-glow transition">
                        <option value="">Seleccionar tipo</option>
                        <option th:each="tipo : ${tiposEntrenamiento}"
                                th:value="${tipo}"
                                th:text="${tipo.displayName}">Tipo</option>
                    </select>
                </div>
                <div>
                    <label class="block text-white font-medium mb-3 flex items-center gap-2">
                        <svg class="w-5 h-5 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                        Musculo Principal
                        <span class="text-red-400">*</span>
                    </label>
                    <select th:field="*{musculoPrimario}" required
                            class="w-full bg-slate-900/50 border border-slate-700/50 rounded-xl px-5 py-4 text-white focus:border-red-500 focus:outline-none input-glow transition">
                        <option value="">Seleccionar musculo</option>
                        <option th:each="musculo : ${musculosPrincipales}"
                                th:value="${musculo}"
                                th:text="${musculo.displayName}">Musculo</option>
                    </select>
                </div>
            </div>

            <!-- URL del Video -->
            <div>
                <label class="block text-white font-medium mb-3 flex items-center gap-2">
                    <svg class="w-5 h-5 text-pink-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                    </svg>
                    URL del Video (opcional)
                </label>
                <input type="url" th:field="*{urlVideo}"
                       class="w-full bg-slate-900/50 border border-slate-700/50 rounded-xl px-5 py-4 text-white placeholder-slate-500 focus:border-red-500 focus:outline-none input-glow transition"
                       placeholder="https://youtube.com/watch?v=...">
            </div>

            <!-- Tip informativo -->
            <div class="bg-slate-900/30 border border-slate-800/50 rounded-xl p-4">
                <div class="flex items-start gap-3">
                    <div class="w-8 h-8 bg-amber-500/10 rounded-lg flex items-center justify-center flex-shrink-0">
                        <svg class="w-4 h-4 text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <div>
                        <p class="text-amber-300 text-sm font-medium">Consejo</p>
                        <p class="text-slate-400 text-sm">Una buena descripcion ayuda a los usuarios a realizar el ejercicio correctamente. Incluye consejos de postura y errores comunes a evitar.</p>
                    </div>
                </div>
            </div>

            <!-- Botones -->
            <div class="flex flex-col sm:flex-row gap-4 pt-6 border-t border-slate-800">
                <button type="submit" class="flex-1 bg-gradient-to-r from-red-500 to-orange-500 hover:from-red-600 hover:to-orange-600 text-white font-bold px-6 py-4 rounded-xl transition shadow-lg shadow-red-500/30 flex items-center justify-center gap-3 text-lg">
                    <svg th:if="${esNuevo}" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                    </svg>
                    <svg th:if="${!esNuevo}" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    <span th:text="${esNuevo} ? 'Crear Ejercicio' : 'Guardar Cambios'">Guardar</span>
                </button>
                <a th:href="@{/ejercicios/catalogo}" class="bg-slate-700 hover:bg-slate-600 text-white px-6 py-4 rounded-xl transition text-center font-medium">
                    Cancelar
                </a>
            </div>

        </form>

    </div>

</main>

<!-- Footer -->
<footer class="py-6 text-center border-t border-slate-800/50 mt-8">
    <p class="text-slate-600 text-sm">FlexFit Admin Panel 2025</p>
</footer>

</body>
</html>